## Nostr 是什么？

Nostr 是一个协议。服务器和客户端可以使用这个协议来进行通信。它包含一系列的规则。就像 比特币、电子邮件、[Bittorrent](<https://zh.wikipedia.org/wiki/BitTorrent_(%E5%8D%8F%E8%AE%AE)>) 等其他协议。显然，Nostr 不是一个应用，但许多应用可以建立在 Nostr 之上。

在 Nostr 的每个用户拥有一堆密钥:

**公钥**可以视为用户名，你可以将公钥分享给其他用户。

**私钥**应该保存在一个安全的地方，确保它为你私人所有。它可以用来给一个事件签名，证明这个事件是你创建的。

## Nostr 的工作原理

1. Nostr 有两个组件：clients 和 relays, 每个用户通过客户端访问 Nostr，任何人都可以运行一个 relay。
2. 每个用户通过公钥来进行唯一标识。每个 post 都被签名。每个客户端验证这些签名。
3. 客户端从他们选择的 relays 获取数据并将数据发布到他们选择的其他 relays。 relays 之间不互相通信，仅直接与用户通信。
4. 例如，要“关注”(follow)某人，用户只需指示他们的客户端查询它知道的 relays 以获取来自该公钥的帖子。
5. 在启动时，客户端从它知道的所有 relays 中查询它所关注的所有用户的数据（例如，从最后一天开始的所有更新），然后按时间顺序向用户显示该数据。
6. “帖子”(post)可以包含任何类型的结构化数据，但最常用的数据将进入标准，以便所有客户端和 relays 可以无缝地处理它们。

## 它如何解决了哪些问题？

### 用户被禁止和服务器被关闭

1. relays 可以阻止用户在那里发布任何内容，但这对他们没有影响，因为他们仍然可以发布到其他 relays。 由于用户是通过公钥识别的，因此当他们被禁止时，他们不会失去他们的身份和他们的追随者。
2. 不需要用户手动输入新的中继地址（虽然这也应该被支持），每当你关注的人发布服务器推荐时，客户端应该自动将其添加到它将查询的 relays 列表中。
3. 如果有人正在使用 relays 发布他们的数据但想迁移到另一个 relay，他们可以在以前的 relay 发布一个服务器推荐，方便其他人迁移到新的 relay；
4. 如果某人被许多 relays 禁止，以至于他们无法广播他们的服务器推荐，他们仍然可以通过其他方式让一些亲密的朋友知道他们现在正在发布哪个 relay。 然后，这些密友可以向该新服务器发布服务器推荐，慢慢地，被禁用户的老粉丝群将开始从新 relay 重新找到他们的帖子。
5. 当继电器停止操作时，上述所有内容也有效。

### 抗审查

每个用户都可以将他们的更新发布到任意数量的 relays。
relays 可以向用户收取费用（目前该费用的协商不在协议范围内）以在那里发布，这确保了审查抵抗（总会有一些俄罗斯服务器愿意拿你的钱来换取服务你的帖子 ).

### 垃圾邮件

如果垃圾邮件是 relay 的一个问题，它可能需要支付发布费用或一些其他形式的身份验证，例如电子邮件地址或电话，并将这些在内部与公钥相关联，然后发布到该 relay ——或其他反垃圾邮件技术，如 hashcash 或验证码。 如果 relays 被用作垃圾邮件载体，它很容易被客户端取消列出，客户端可以继续从其他 relays 获取更新。

### 数据存储

不需要数百个活跃的 relays 就可以让网络保持健康。 事实上，考虑到在现有 relays 开始出现异常时可以轻松创建新 relays 并通过网络传播这一事实，它只需少数几个就可以正常工作。 因此，所需的数据存储量通常比 Mastodon 或类似软件要少。

或者考虑一个不同的结果：其中存在数百个由业余爱好者运行的 relays，每个 relays 来自一小群用户的更新。 该体系结构也可以扩展：数据从用户发送到单个服务器，然后从该服务器直接发送到将使用该数据的用户。 它不必由其他任何人存储。 在这种情况下，任何一台服务器处理来自其他服务器的更新都不是很大的负担，拥有业余服务器也不是问题。

### 视频等大型内容

relays 很容易拒绝大型内容，或者对接受和托管大型内容收费。 当信息和激励措施明确时，市场力量很容易解决问题。

### 欺骗用户的技术

每个客户端都可以决定如何最好地向用户显示帖子，因此你始终可以选择以您想要的方式使用您想要的内容——从使用 AI 来决定您将看到的更新顺序到只按时间顺序阅读它们。

## 什么是事件？

事件是网络(网络由客户端和 relays 组成)上的对象。relays 会公开它的 websocket 端点，客户端可以连接它，从网络上获取新的事件。

```json
{
  "id": <32字节, 采用 sha256 加密的序列化的事件数据>
  "pubkey": <32字节, 采用16进制编码 表明事件创建者的公钥>,
  "created_at": <以秒为单位的 unix 时间戳>,
  "kind": <整数>,
  "tags": [
    ["e", <32-bytes hex of the id of another event>, <推荐的 relay URL>],
    ["p", <32-bytes hex of the key>, <推荐的 relay URL>],
    ... // other kinds of tags may be included later
  ],
  "content": <任意字符>,
  "sig": <64字节, signature of the sha256 hash of the serialized event data, which is the same as the "id" field>
}
```

## Clients(客户端)

客户端可以执行的行为:

1. 发布新的事件.
2. 请求或是订阅新的更新.
3. 取消以前的订阅.

## Relays(服务器)

Relays 可以执行的行为

1. 发送事件.
2. 给客户端发送错误信息或是其他东西.

## FAQ

### 这很简单。 为什么以前没有人这样做过？

我不知道，但我想这与以下事实有关：创建社交网络的人要么是想要赚钱的公司，要么是想要完全不使用服务器来制作东西的 P2P 活动家。 他们都没有看到 Nostr 使用的两个世界的特定组合。

### 我如何找到要关注的人？

首先，您必须了解他们并以某种方式获得他们的公钥，无论是通过询问还是在某处看到它的引用。 进入 Nostr 社交网络后，您将能够看到他们与其他人互动，然后您也可以开始关注这些人并与之互动。

### 我如何找到 relays？ 如果我没有连接到其他人连接的相同 relays 会怎样？

你将无法与那个人交流。 但是可以使用事件提示，以便您的客户端软件（或您手动）知道如何连接到其他人的 relay 并与他们交互。 未来还有其他关于如何解决这个问题的想法，但我们永远不能保证完美的可达性，任何协议都不能。

### 我可以知道有多少人关注我吗？

不，但是如果中继以额外的协议方式协作，您可以获得一些估计。

### 人们运行 relays 的动机是什么？

这个问题具有误导性。 它假设中继是存在的免费哑管道，以便人们可以通过它们四处移动数据。 在这种情况下，是的，激励措施将不存在。 事实上，所有其他 p2p 网络栈中的 DHT 节点都可以这样说：人们运行 DHT 节点的动机是什么？

### Nostr 使您能够在服务器 relays 之间移动或使用多个中继，但如果这些中继仅在 AWS 或 Azure 上，有什么区别？

今天，全球有成千上万的 VPS 提供商，不仅仅是 AWS 或 Azure。 AWS 或 Azure 正是需要大量规模的单一集中式服务提供商使用的提供商，而且不仅仅是这两个。 对于较小的中继服务器，任何 VPS 都可以很好地完成这项工作。
